// Deadlines set relative to "now" so countdowns always work in demo
const now = new Date();
const hoursFromNow = (h) => new Date(now.getTime() + h * 60 * 60 * 1000).toISOString();
const daysFromNow = (d) => hoursFromNow(d * 24);
const daysAgo = (d) => new Date(now.getTime() - d * 24 * 60 * 60 * 1000).toISOString();

export const initiatives = [
  {
    id: 'init_1',
    title: 'Clean Water for Elmsworth Village',
    description: `The current water filtration system serving Elmsworth's community centre and surrounding homes is over 30 years old and failing regular safety checks. We need to replace it with a modern UV purification unit that will serve over 200 households.\n\nThe quote from Devon Water Solutions includes installation, testing, and a 5-year maintenance plan. Every penny goes directly to the supplier — the community centre has agreed to manage the project at no cost.\n\nThis is urgent: the current system was flagged in last month's inspection and we have a 60-day compliance window.`,
    community: { id: 'com_1', name: 'Elmsworth Collective' },
    organizer: { id: 'user_2', name: 'Sarah Chen', initials: 'SC' },
    goalCents: 500000,
    heldTotalCents: 325000,
    capturedTotalCents: 0,
    currency: 'GBP',
    status: 'open',
    pledgeCount: 42,
    deadline: daysFromNow(4.5),
    createdAt: daysAgo(2),
    location: { name: 'Elmsworth, Devon', lat: 50.72, lng: -3.53 },
    category: 'infrastructure',
    updates: [
      { date: daysAgo(1), text: "We've hit 65%! The supplier has confirmed they can begin installation within a week of funding. Thank you all so much." },
      { date: daysAgo(0.5), text: 'Devon County Council has offered to match 10% if we reach our target. Let\'s push!' },
    ],
  },
  {
    id: 'init_2',
    title: 'Emergency Heating Fund — Winter 2026',
    description: `Three families in our network are facing the winter without functioning heating systems. Two have broken boilers, one has a condemned gas fire. Landlords are unresponsive.\n\nThis pool will cover emergency portable heaters, thermal blankets, and a deposit toward proper boiler repairs. The Hackney Mutual Aid emergency committee will purchase and distribute supplies directly.\n\nNo one should be cold in their own home.`,
    community: { id: 'com_2', name: 'Hackney Mutual Aid' },
    organizer: { id: 'user_3', name: 'James Okafor', initials: 'JO' },
    goalCents: 180000,
    heldTotalCents: 180000,
    capturedTotalCents: 180000,
    currency: 'GBP',
    status: 'funded',
    pledgeCount: 67,
    deadline: daysAgo(1),
    createdAt: daysAgo(6),
    location: { name: 'Hackney, London', lat: 51.545, lng: -0.055 },
    category: 'emergency',
    updates: [
      { date: daysAgo(3), text: 'Halfway there in just 3 days. This community is incredible.' },
      { date: daysAgo(1), text: 'FUNDED! All pledges have been captured. Supplies being purchased tomorrow morning.' },
    ],
  },
  {
    id: 'init_3',
    title: 'Protected Bike Lane — Stokes Croft',
    description: `Bristol City Council approved a protected bike lane on Stokes Croft in principle but said they lack budget until 2027. We're not waiting.\n\nThis pool funds temporary bollard protection for the existing painted lane (materials + installation by licensed contractors). The council has given written permission for the pilot.\n\nWe've done the measurements, got three quotes, and chosen a local contractor. All we need is the funding.`,
    community: { id: 'com_3', name: 'Bristol Cycling Co-op' },
    organizer: { id: 'user_4', name: 'Priya Patel', initials: 'PP' },
    goalCents: 350000,
    heldTotalCents: 142000,
    capturedTotalCents: 0,
    currency: 'GBP',
    status: 'open',
    pledgeCount: 31,
    deadline: daysFromNow(2),
    createdAt: daysAgo(5),
    location: { name: 'Stokes Croft, Bristol', lat: 51.462, lng: -2.591 },
    category: 'transport',
    updates: [
      { date: daysAgo(2), text: 'Just over 40% funded. Share this with anyone who cycles Stokes Croft — we need a final push!' },
    ],
  },
  {
    id: 'init_4',
    title: 'Roof Repair Emergency — 14 Leith Walk',
    description: `The roof at 14 Leith Walk has been leaking for 8 months. Our factor has collected repair funds but done nothing. Six flats are affected, with two experiencing serious damp and mould.\n\nWe've obtained our own quote from a reputable roofer and are bypassing the factor. This pool covers the repair plus scaffolding hire. We'll pursue the factor for reimbursement afterward.\n\nEvery tenant in the building has agreed to pledge their share.`,
    community: { id: 'com_4', name: 'Edinburgh Tenants Union' },
    organizer: { id: 'user_9', name: 'David Kim', initials: 'DK' },
    goalCents: 420000,
    heldTotalCents: 398000,
    capturedTotalCents: 0,
    currency: 'GBP',
    status: 'open',
    pledgeCount: 24,
    deadline: hoursFromNow(18),
    createdAt: daysAgo(6),
    location: { name: 'Leith, Edinburgh', lat: 55.974, lng: -3.172 },
    category: 'housing',
    updates: [
      { date: daysAgo(4), text: 'All six flats have now pledged. We just need a few more outside supporters to hit the target.' },
      { date: daysAgo(1), text: '95% funded with 18 hours to go. So close!' },
    ],
  },
  {
    id: 'init_5',
    title: 'Community Fridge & Pantry Setup',
    description: `We're setting up a community fridge and dry pantry at the Hackney Community Centre. Local shops and restaurants have already committed to regular donations — we just need the infrastructure.\n\nFunding covers: commercial fridge unit, shelving, signage, hygiene supplies, and 3 months of electricity costs. Volunteers are already lined up for daily management.`,
    community: { id: 'com_2', name: 'Hackney Mutual Aid' },
    organizer: { id: 'user_6', name: 'Lena Bergström', initials: 'LB' },
    goalCents: 220000,
    heldTotalCents: 88000,
    capturedTotalCents: 0,
    currency: 'GBP',
    status: 'open',
    pledgeCount: 19,
    deadline: daysFromNow(5),
    createdAt: daysAgo(2),
    location: { name: 'Hackney, London', lat: 51.547, lng: -0.049 },
    category: 'food',
    updates: [
      { date: daysAgo(1), text: '40% in two days! The community centre has confirmed our space allocation.' },
    ],
  },
  {
    id: 'init_6',
    title: 'Playground Restoration — Victoria Park',
    description: `The Victoria Park playground has been in disrepair for two years. Broken swings, rusty climbing frame, and unsafe surfacing. The council says it's "in the queue" but won't commit to a date.\n\nWe've partnered with a playground specialist who can do a full restoration for significantly less than the council quote. This covers new safety surfacing, swing replacements, and climbing frame repairs.`,
    community: { id: 'com_1', name: 'Elmsworth Collective' },
    organizer: { id: 'user_7', name: 'Tom Ashworth', initials: 'TA' },
    goalCents: 750000,
    heldTotalCents: 0,
    capturedTotalCents: 0,
    currency: 'GBP',
    status: 'failed',
    pledgeCount: 12,
    deadline: daysAgo(2),
    createdAt: daysAgo(9),
    location: { name: 'Victoria Park, Devon', lat: 50.718, lng: -3.525 },
    category: 'community',
    updates: [
      { date: daysAgo(5), text: 'Struggling to gain traction. Please share widely — this benefits every family in the area.' },
      { date: daysAgo(2), text: 'Unfortunately we didn\'t reach our goal. All holds have been released. We\'ll regroup and try again with a revised plan.' },
    ],
  },
  {
    id: 'init_7',
    title: 'Legal Fund — Rent Increase Challenge',
    description: `Four tenants on Dalry Road received identical 40% rent increases, well above the Scottish Government cap. We believe this is unlawful and want to challenge it at the First-tier Tribunal.\n\nThis pool covers solicitor consultation fees and tribunal preparation costs. If we win, it sets precedent for every tenant in the building.`,
    community: { id: 'com_4', name: 'Edinburgh Tenants Union' },
    organizer: { id: 'user_10', name: 'Fatima Al-Rashid', initials: 'FA' },
    goalCents: 300000,
    heldTotalCents: 156000,
    capturedTotalCents: 0,
    currency: 'GBP',
    status: 'open',
    pledgeCount: 38,
    deadline: daysFromNow(3),
    createdAt: daysAgo(4),
    location: { name: 'Dalry, Edinburgh', lat: 55.942, lng: -3.218 },
    category: 'legal',
    updates: [
      { date: daysAgo(2), text: 'Over 50% funded. The solicitor has agreed to begin preliminary work once we confirm funding.' },
    ],
  },
  {
    id: 'init_8',
    title: 'Cargo Bike Sharing Scheme',
    description: `We want to buy two electric cargo bikes for a community sharing scheme. Members can book them for shopping trips, school runs, or moving stuff around — replacing short car journeys.\n\nThe bikes will be stored at the Bristol Cycling Co-op workshop and maintained by our volunteer mechanics. Booking will be via a simple online calendar.`,
    community: { id: 'com_3', name: 'Bristol Cycling Co-op' },
    organizer: { id: 'user_5', name: 'Marcus Webb', initials: 'MW' },
    goalCents: 680000,
    heldTotalCents: 680000,
    capturedTotalCents: 680000,
    currency: 'GBP',
    status: 'funded',
    pledgeCount: 54,
    deadline: daysAgo(3),
    createdAt: daysAgo(10),
    location: { name: 'Bristol', lat: 51.455, lng: -2.597 },
    category: 'transport',
    updates: [
      { date: daysAgo(5), text: 'FUNDED! Two Tern GSD S10 cargo bikes ordered. Expected delivery in 2 weeks.' },
      { date: daysAgo(3), text: 'Bikes have shipped! Setting up the booking system this weekend.' },
    ],
  },
  {
    id: 'init_9',
    title: 'Damp Survey & Legal Action — Block C',
    description: `Block C residents have documented severe damp and black mould in 8 out of 12 flats. Children in three households have developed respiratory issues.\n\nThis pool funds an independent damp survey by a RICS-accredited surveyor plus initial legal consultation. Evidence gathered will support both a formal complaint and potential legal action.`,
    community: { id: 'com_2', name: 'Hackney Mutual Aid' },
    organizer: { id: 'user_11', name: 'Oliver Hughes', initials: 'OH' },
    goalCents: 250000,
    heldTotalCents: 210000,
    capturedTotalCents: 0,
    currency: 'GBP',
    status: 'open',
    pledgeCount: 45,
    deadline: daysFromNow(1.5),
    createdAt: daysAgo(5),
    location: { name: 'Hackney, London', lat: 51.541, lng: -0.057 },
    category: 'housing',
    updates: [
      { date: daysAgo(3), text: 'The surveyor has confirmed availability for next week if we hit our target.' },
      { date: daysAgo(1), text: '84% funded — just a few more pledges needed!' },
    ],
  },
  {
    id: 'init_10',
    title: 'Community Garden Greenhouse',
    description: `Our community garden has been running for 3 years and we've outgrown our outdoor-only setup. A greenhouse will let us start seedlings earlier, grow year-round, and host workshops in bad weather.\n\nWe've found a great 6x3m polycarbonate greenhouse from a local supplier. Price includes delivery, base frame, and shelving. Our volunteers will handle assembly.`,
    community: { id: 'com_1', name: 'Elmsworth Collective' },
    organizer: { id: 'user_8', name: 'Nina Rossi', initials: 'NR' },
    goalCents: 280000,
    heldTotalCents: 72000,
    capturedTotalCents: 0,
    currency: 'GBP',
    status: 'open',
    pledgeCount: 15,
    deadline: daysFromNow(6),
    createdAt: daysAgo(1),
    location: { name: 'Elmsworth, Devon', lat: 50.722, lng: -3.528 },
    category: 'environment',
    updates: [
      { date: daysAgo(0.5), text: 'Off to a great start — 25% funded on day one!' },
    ],
  },
];

export const categories = [
  { id: 'infrastructure', label: 'Infrastructure', color: 'forest' },
  { id: 'emergency', label: 'Emergency', color: 'red' },
  { id: 'transport', label: 'Transport', color: 'amber' },
  { id: 'housing', label: 'Housing', color: 'forest' },
  { id: 'food', label: 'Food & Essentials', color: 'emerald' },
  { id: 'community', label: 'Community', color: 'forest' },
  { id: 'legal', label: 'Legal', color: 'stone' },
  { id: 'environment', label: 'Environment', color: 'emerald' },
];
